<?php

/**
 * @file
 * This file contains all Drupal hooks for the module other than any
 * node hooks and block hooks. Those go in the [module name].chado_node.inc file
 * and [module_name].blocks.inc respectively
 *
 */

// EXPLANATION: include any files needed for this module.  That includes any
// API file, the theme file, or include files.
require('api/tripal_file.api.inc');
require('theme/tripal_file.theme.inc');


/**
 * Implements hook_views_api()
 *
 * This hook tells drupal that there is views support for
 * for this module which then automatically includes the tripal_db.views.inc
 * where all the views integration code is found.
 *
 * @ingroup tripal_file
 */
function tripal_file_views_api() {
  return [
    'api' => 3.0,
  ];
}

/**
 * Implements hook_bundle_fields_info_alter().
 */
function tripal_file_bundle_fields_info_alter(&$info, $bundle, $term) {

}

/**
 * Implements hook_bundle_fields_info_alter().
 */
function tripal_file_bundle_instances_info_alter(&$info, $bundle, $term) {

  // Fields for the File content type.
  if ($bundle->accession == 'SIO:000396') {
    $info['schema__name']['widget']['type'] = 'text_textfield';
    $info['schema__name']['settings']['text_processing'] = '0';

  }

  // Fields for the License content type.
  if ($bundle->accession == 'schema:license') {
    // We don't want the URL to be a textfield:
    $info['data__uri']['label'] = 'URI';
    $info['data__uri']['widget']['type'] = 'text_textfield';
    $info['data__uri']['settings']['text_processing'] = '0';
  }
}
